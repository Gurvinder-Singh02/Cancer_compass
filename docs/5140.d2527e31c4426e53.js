"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5140],{5140:(T,d,r)=>{r.r(d),r.d(d,{ChatPageModule:()=>y});var l=r(6895),c=r(433),i=r(5035),g=r(1927),h=r(655),n=r(8256),p=r(6775),u=r(8081);let m=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-chat-box"]],inputs:{chat:"chat",current_user_id:"current_user_id"},decls:9,vars:9,consts:[["lines","none"],[1,"ion-text-wrap",3,"slot"],["name","checkmark-done-outline",3,"color"]],template:function(o,e){1&o&&(n.TgZ(0,"ion-item",0)(1,"ion-label",1)(2,"ion-text"),n._uU(3),n.qZA(),n.TgZ(4,"ion-note")(5,"small"),n._uU(6),n.ALo(7,"date"),n.qZA(),n._UZ(8,"ion-icon",2),n.qZA()()()),2&o&&(n.Tol((null==e.chat?null:e.chat.sender)!==e.current_user_id?"sender":"user"),n.xp6(1),n.Q6J("slot",(null==e.chat?null:e.chat.sender)===e.current_user_id?"end":"start"),n.xp6(2),n.Oqu(null==e.chat?null:e.chat.message),n.xp6(3),n.Oqu(n.xi3(7,6,null==e.chat||null==e.chat.createdAt?null:e.chat.createdAt.toDate(),"HH:mm")),n.xp6(2),n.Q6J("color",(null==e.chat?null:e.chat.sender)===e.current_user_id?"light":"secondary"))},dependencies:[i.gu,i.Ie,i.Q$,i.uN,i.yW,l.uU],styles:['ion-item[_ngcontent-%COMP%]{--background: transparent;--padding-start: 8px;--padding-end: 0px;--ion-safe-area-left: 0px;--min-height: 32px;--border-width: 0}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{position:relative;border-radius:12px;padding:4px 8px;margin-top:12px;max-width:70%;min-width:50%}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-weight:400;font-size:.7rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]:after{content:"";width:52px;height:12px;display:inline-block;vertical-align:top;visibility:hidden;font-size:.75rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{position:absolute;display:flex;right:0;bottom:0;padding:4px 8px 4px 4px;line-height:16px;pointer-events:auto;color:var(--ion-color-medium)}.sender[_ngcontent-%COMP%]:after{content:"";position:absolute;border:0 solid transparent;border-top-color:transparent;border-top-style:solid;border-top-width:0px;border-top:9px solid var(--ion-color-light);border-radius:0 20px;width:15px;height:30px;transform:rotate(112deg);bottom:-4px;left:-4px}.sender[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-left:8px;background-color:var(--ion-color-light)}.sender[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]:after{width:72px!important}.sender[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:2px;line-height:16px}.sender[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.user[_ngcontent-%COMP%]:after{content:"";position:absolute;border:0 solid transparent;border-bottom-color:transparent;border-bottom-style:solid;border-bottom-width:0px;border-bottom:9px solid var(--ion-color-secondary);border-radius:20px 0;width:15px;height:30px;transform:rotate(50deg);bottom:0px;right:0px}.user[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{background-color:var(--ion-color-secondary);color:#fff}.user[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]:after{width:72px!important}.user[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:2px;line-height:16px;color:var(--ion-color-dark)}.user[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}']}),t})();function _(t,a){if(1&t&&n._UZ(0,"app-empty-screen",12),2&t){const o=n.oxw();n.Q6J("model",o.model)}}function f(t,a){if(1&t&&(n.TgZ(0,"ion-item-group",16),n._UZ(1,"app-chat-box",17),n.qZA()),2&t){const o=a.$implicit,e=n.oxw(3);n.xp6(1),n.Q6J("chat",o)("current_user_id",e.chatService.currentUserId)}}function C(t,a){if(1&t&&(n.TgZ(0,"ion-list",14),n.YNc(1,f,2,2,"ion-item-group",15),n.qZA()),2&t){const o=n.oxw().ngIf;n.xp6(1),n.Q6J("ngForOf",o)}}function b(t,a){if(1&t&&(n.ynx(0),n.YNc(1,C,2,1,"ion-list",13),n.BQk()),2&t){const o=a.ngIf;n.xp6(1),n.Q6J("ngIf",(null==o?null:o.length)>0)}}function P(t,a){if(1&t){const o=n.EpF();n.TgZ(0,"ion-fab-button",18),n.NdJ("click",function(){n.CHM(o);const s=n.oxw();return n.KtG(s.sendMessage())}),n._UZ(1,"ion-icon",19),n.qZA()}}function x(t,a){1&t&&(n.TgZ(0,"ion-fab-button",20),n._UZ(1,"ion-spinner",21),n.qZA())}const M=[{path:"",component:(()=>{class t{constructor(o,e,s){this.route=o,this.navCtrl=e,this.chatService=s,this.model={icon:"chatbubbles-outline",title:"No Conversation",color:"danger"}}ngOnInit(){const o=this.route.snapshot.queryParams;console.log("data: ",o),null!=o&&o.name&&(this.name=o.name,this.des=o.des);const e=this.route.snapshot.paramMap.get("id");console.log("check id: ",e),e?(this.id=e,this.chatService.getChatRoomMessages(this.id),this.chats=this.chatService.selectedChatRoomMessages,console.log(this.chats)):this.navCtrl.back()}ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){console.log("scroll bottom"),this.chats&&this.content.scrollToBottom(500)}sendMessage(){var o;return(0,h.mG)(this,void 0,void 0,function*(){if(this.message&&""!=(null===(o=this.message)||void 0===o?void 0:o.trim()))try{this.isLoading=!0,yield this.chatService.sendMessage(this.id,this.message),this.message="",this.isLoading=!1,this.scrollToBottom()}catch(e){this.isLoading=!1,console.log(e)}})}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(g.gz),n.Y36(i.SH),n.Y36(p.a))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-chat"]],viewQuery:function(o,e){if(1&o&&n.Gf(i.W2,5),2&o){let s;n.iGM(s=n.CRH())&&(e.content=s.first)}},decls:19,vars:11,consts:[["color","secondary"],["slot","start"],["color","light","defaultHref","/home"],["color","light",1,"ion-no-padding"],[1,"ion-text-center","ion-margin-top",2,"font-size","10.5px","color","#57bf9c"],[3,"model",4,"ngIf"],[4,"ngIf"],["color","light"],["autoGrow","","rows","1","placeholder","Send message",1,"ion-text-center",3,"ngModel","ngModelChange"],["slot","end"],["size","small","color","primary",3,"click",4,"ngIf"],["size","small","color","primary",4,"ngIf"],[3,"model"],["lines","none",4,"ngIf"],["lines","none"],["class","chats-group",4,"ngFor","ngForOf"],[1,"chats-group"],[3,"chat","current_user_id"],["size","small","color","primary",3,"click"],["name","send"],["size","small","color","primary"],["name","crescent","color","white"]],template:function(o,e){if(1&o&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n._UZ(3,"ion-back-button",2),n.qZA(),n.TgZ(4,"ion-title",3),n._uU(5),n.qZA()()(),n.TgZ(6,"ion-content")(7,"p",4),n._uU(8),n.qZA(),n.YNc(9,_,1,1,"app-empty-screen",5),n.ALo(10,"async"),n.YNc(11,b,2,1,"ng-container",6),n.ALo(12,"async"),n.qZA(),n.TgZ(13,"ion-footer")(14,"ion-toolbar",7)(15,"ion-textarea",8),n.NdJ("ngModelChange",function(Z){return e.message=Z}),n.qZA(),n.TgZ(16,"ion-buttons",9),n.YNc(17,P,2,0,"ion-fab-button",10),n.YNc(18,x,2,0,"ion-fab-button",11),n.qZA()()()),2&o){let s;n.xp6(5),n.Oqu(e.name),n.xp6(3),n.hij("",e.des," "),n.xp6(1),n.Q6J("ngIf",0===(null==(s=n.lcZ(10,7,e.chats))?null:s.length)),n.xp6(2),n.Q6J("ngIf",n.lcZ(12,9,e.chats)),n.xp6(4),n.Q6J("ngModel",e.message),n.xp6(2),n.Q6J("ngIf",!e.isLoading),n.xp6(1),n.Q6J("ngIf",e.isLoading)}},dependencies:[l.sg,l.O5,c.JJ,c.On,i.oU,i.Sm,i.W2,i.W4,i.fr,i.Gu,i.gu,i.Ub,i.q_,i.PQ,i.g2,i.wd,i.sr,i.j9,i.cs,u.s,m,l.Ov],styles:["ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:transparent}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:0 3px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{border:1px solid var(--ion-color-medium);border-radius:20px;margin:.5vh 0}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[g.Bz.forChild(M),g.Bz]}),t})();var v=r(5642);let y=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[l.ez,c.u5,i.Pc,O,v.K]}),t})()}}]);